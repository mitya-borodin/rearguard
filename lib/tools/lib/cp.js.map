{"version":3,"sources":["../../../src/tools/lib/cp.js"],"names":["spawn","command","args","options","Promise","resolve","reject","on","code","Error","join","exec","err","stdout","stderr"],"mappings":";;;;;;;AAAA;;;;;;AAEO,MAAMA,wBAAQ,CAACC,OAAD,EAAUC,IAAV,EAAgBC,OAAhB,KAA4B,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAChF,0BAAGN,KAAH,CAASC,OAAT,EAAkBC,IAAlB,EAAwBC,OAAxB,EAAiCI,EAAjC,CAAoC,OAApC,EAA8CC,IAAD,IAAU;AACrD,QAAIA,SAAS,CAAb,EAAgB;AACdH;AACD,KAFD,MAEO;AACLC,aAAO,IAAIG,KAAJ,CAAW,GAAER,OAAQ,IAAGC,KAAKQ,IAAL,CAAU,GAAV,CAAe,OAAMF,IAAK,UAAlD,CAAP;AACD;AACF,GAND;AAOD,CARgD,CAA1C;;AAUA,MAAMG,sBAAO,CAACV,OAAD,EAAUE,OAAV,KAAsB,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACzE,0BAAGK,IAAH,CAAQV,OAAR,EAAiBE,OAAjB,EAA0B,CAACS,GAAD,EAAMC,MAAN,EAAcC,MAAd,KAAyB;AACjD,QAAIF,GAAJ,EAAS;AACPN,aAAOM,GAAP;AACA;AACD;;AAEDP,YAAQ,EAACQ,MAAD,EAASC,MAAT,EAAR;AACD,GAPD;AAQD,CATyC,CAAnC;;kBAWQ,EAACd,KAAD,EAAQW,IAAR,E","file":"cp.js","sourcesContent":["import cp from 'child_process';\n\nexport const spawn = (command, args, options) => new Promise((resolve, reject) => {\n  cp.spawn(command, args, options).on('close', (code) => {\n    if (code === 0) {\n      resolve();\n    } else {\n      reject(new Error(`${command} ${args.join(' ')} => ${code} (error)`));\n    }\n  });\n});\n\nexport const exec = (command, options) => new Promise((resolve, reject) => {\n  cp.exec(command, options, (err, stdout, stderr) => {\n    if (err) {\n      reject(err);\n      return;\n    }\n\n    resolve({stdout, stderr});\n  });\n});\n\nexport default {spawn, exec};\n"]}